// Insights page styles for the participatory space admin panel.

// Selectors — compact inline controls: "Label: [value ▾]"
.insights-selectors {
  @apply flex gap-5 flex-wrap items-center justify-center;

  &__field {
    @apply flex items-center border border-gray-6 rounded-md bg-white overflow-hidden;
  }

  &__label {
    @apply py-2 pl-3 font-semibold text-sm text-gray-2 whitespace-nowrap;

    &::after {
      content: ":";
    }
  }

  &__select {
    @apply py-2 pr-3 bg-transparent text-sm text-gray-2 cursor-pointer outline-none border-none;
    padding-left: 0.375rem;
    appearance: auto;

    &:focus {
      @apply text-gray-4;
    }
  }
}

// Pivot table scroll: table grows by content, table-scroll handles overflow.
// min-width:0 on .layout-content is set via <style> tag in show.html.erb
// because PostCSS strips :has() selectors.
.insights-pivot-wrapper .table-scroll {
  @apply overflow-x-auto;
  max-width: 100%;
}

.table-scroll .insights-table {
  width: max-content;
  min-width: 100%;
}

// Override table-list responsive alignment (text-left md:text-center)
// and tfoot padding (p-2) that the framework applies.
.table-list.insights-table {
  th:not(:first-child),
  td:not(:first-child) {
    @apply text-right;
  }

  tfoot td {
    @apply px-3 py-1.5;
  }
}

.insights-table {
  @apply border-collapse;

  th,
  td {
    @apply px-3 py-1.5 whitespace-nowrap;
  }

  // Header
  &__corner-header,
  &__col-header,
  &__row-total-header {
    @apply border-b-2 border-neutral-200;
  }

  &__corner-header {
    @apply text-left;
  }

  &__col-header,
  &__row-total-header {
    @apply text-right;
  }

  &__row-total-header {
    @apply font-bold;
  }

  // Body
  &__row-header {
    @apply font-semibold border-b border-neutral-100;
  }

  &__cell {
    @apply text-right border-b border-neutral-100;
  }

  &__row-total {
    @apply text-right font-bold border-b border-neutral-100;
  }

  // Footer
  &__footer-label,
  &__col-total,
  &__grand-total {
    @apply font-bold border-t-2 border-neutral-200;
  }

  &__col-total,
  &__grand-total {
    @apply text-right;
  }

  &__grand-total {
    @apply bg-neutral-100;
  }
}

// Legend
.insights-legend {
  @apply flex items-center gap-3 mt-3 text-sm text-gray-2;

  &__gradient {
    @apply flex h-4 rounded overflow-hidden;
    width: 160px;

    &-step {
      @apply flex-1;
    }
  }

  &__separator {
    @apply h-4 w-px bg-gray-6;
  }

  &__non-specified {
    @apply ml-4;
    color: #636363;
  }

  &__non-specified-swatch {
    @apply inline-block w-4 h-4 rounded align-middle;
    background-color: hsl(0, 0%, 80%);
  }
}
