// Insights page styles for the participatory space admin panel.

// Selectors — compact inline controls: "Label: [value ▾]"
.insights-selectors {
  @apply flex gap-5 flex-wrap items-center justify-center;

  &__field {
    @apply flex items-center border border-gray-6 rounded-md bg-white overflow-hidden;
  }

  &__label {
    @apply py-2 pl-3 font-semibold text-sm text-gray-2 whitespace-nowrap;

    &::after {
      content: ":";
    }
  }

  &__select {
    @apply py-2 pr-3 bg-transparent text-sm text-gray-2 cursor-pointer outline-none border-none;
    padding-left: 0.375rem;
    appearance: auto;

    &:focus {
      @apply text-gray-4;
    }
  }

}

// Required for nested flex containers in admin layout:
// without this, wide tables force page-level horizontal scroll.
.layout-content:has(.insights-page),
.sidebar-menu__container:has(.insights-page),
.item_show__wrapper:has(.insights-page) {
  min-width: 0;
}

// Pivot table scroll: table grows by content, table-scroll handles overflow.
.insights-pivot-wrapper .table-scroll {
  @apply overflow-x-auto;
  max-width: 100%;
}

.table-scroll .insights-table {
  width: max-content;
  min-width: 100%;
}

.table-list.insights-table {
  thead th {
    @apply text-center;
  }

  tbody th:first-child,
  tbody td:first-child,
  tfoot th:first-child,
  tfoot td:first-child {
    @apply text-left;
    padding-left: 0.5rem;
  }

  tbody th:last-child,
  tbody td:last-child,
  tfoot th:last-child,
  tfoot td:last-child {
    @apply text-center;
  }

  tbody td:not(:first-child):not(:last-child),
  tfoot td:not(:first-child):not(:last-child) {
    @apply text-center;
  }
}

.insights-table {
  &__corner-header {
    @apply text-center;
  }

  &__col-header {
    @apply text-center;
  }

  &__row-total-header {
    @apply text-center text-xs font-bold;
  }

  &__row-header {
    @apply text-left text-xs font-semibold;
  }

  &__cell {
    @apply text-center;
  }

  &__row-total {
    @apply text-center text-xs font-bold;
  }

  &__footer-label,
  &__col-total,
  &__grand-total {
    @apply text-xs font-bold;
  }

  &__footer-label {
    @apply text-left;
  }

  &__col-total {
    @apply text-center;
  }

  &__grand-total {
    @apply text-right;
  }
}

// Legend
.insights-legend {
  --insights-heat-1: hsl(50, 90%, 86%);
  --insights-heat-2: hsl(38, 87%, 77%);
  --insights-heat-3: hsl(25, 84%, 68%);
  --insights-heat-4: hsl(12, 81%, 59%);
  --insights-heat-5: hsl(0, 78%, 50%);
  --insights-total-1: hsl(215, 53%, 87%);
  --insights-total-2: hsl(215, 57%, 77%);
  --insights-total-3: hsl(215, 61%, 67%);
  --insights-total-4: hsl(215, 63%, 57%);
  --insights-total-5: hsl(215, 65%, 50%);
  --insights-non-specified: hsl(0, 0%, 80%);

  @apply flex items-center gap-3 mt-3 text-sm text-gray-2;

  &__gradient {
    @apply flex h-4 rounded overflow-hidden;
    width: 160px;

    &-step {
      @apply flex-1;
    }

    &--heat {
      .insights-legend__gradient-step:nth-child(1) {
        background-color: var(--insights-heat-1);
      }

      .insights-legend__gradient-step:nth-child(2) {
        background-color: var(--insights-heat-2);
      }

      .insights-legend__gradient-step:nth-child(3) {
        background-color: var(--insights-heat-3);
      }

      .insights-legend__gradient-step:nth-child(4) {
        background-color: var(--insights-heat-4);
      }

      .insights-legend__gradient-step:nth-child(5) {
        background-color: var(--insights-heat-5);
      }
    }

    &--total {
      .insights-legend__gradient-step:nth-child(1) {
        background-color: var(--insights-total-1);
      }

      .insights-legend__gradient-step:nth-child(2) {
        background-color: var(--insights-total-2);
      }

      .insights-legend__gradient-step:nth-child(3) {
        background-color: var(--insights-total-3);
      }

      .insights-legend__gradient-step:nth-child(4) {
        background-color: var(--insights-total-4);
      }

      .insights-legend__gradient-step:nth-child(5) {
        background-color: var(--insights-total-5);
      }
    }
  }

  &__separator {
    @apply h-4 w-px bg-gray-6;
  }

  &__non-specified {
    @apply ml-4 text-gray-2;
  }

  &__non-specified-swatch {
    @apply inline-block w-4 h-4 rounded align-middle;
    background-color: var(--insights-non-specified);
  }
}
